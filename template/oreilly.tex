\documentclass[12pt, LANGUAGE]{scrbook}

%packages
\usepackage{fontspec}
\usepackage{mathtools}
\usepackage{unicode-math}
\usepackage[a4paper]{geometry}
\usepackage[svgnames]{xcolor}
\usepackage{svg}
\usepackage{awesomebox}
\usepackage{minted}
\usepackage{graphicx}
\usepackage{scrlayer-scrpage}
\usepackage{newunicodechar}
\usepackage{hyperref}
\usepackage{needspace}
\usepackage{amsthm}
\usepackage[framemethod=tikz]{mdframed}
\usepackage{polyglossia}
\usepackage{csquotes}
\usepackage{microtype}

\MakeOuterQuote{"}

\setdefaultlanguage{LANGUAGE}

\hyphenation{cor-res-pon-den-ce}

\AtBeginEnvironment{proof}{\small}

\theoremstyle{plain}

\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=cyan!80,
backgroundcolor=cyan!10]{theorem}{Theorem}[chapter]
\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=cyan!80,
backgroundcolor=cyan!10]{lemma}[theorem]{Lemma}
\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=cyan!80,
backgroundcolor=cyan!10]{corollary}[theorem]{Corollary}

\theoremstyle{definition}

\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=teal!80,
backgroundcolor=teal!10]{definition}{Definition}[chapter]

\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=purple!80,
backgroundcolor=purple!10]{axiom}{Axiom}[chapter]


\newtheoremstyle{small}% name
  {}%      Space above, empty = `usual value'
  {}%      Space below
  {\small}% Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {\itshape}% Thm head font
  {}%        Punctuation after thm head
  { }%     Space after thm head: " " = normal interword space;
        %       \newline = linebreak
  {}% Thm head spec

\theoremstyle{small}

\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=orange!80,
backgroundcolor=orange!10]{example}{Example}[chapter]

\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=yellow!80,
backgroundcolor=yellow!10]{exercise}{Exercise}[chapter]

\newmdtheoremenv[hidealllines=true,
leftline=true,
linewidth=6pt,
innerleftmargin=10pt,
innerrightmargin=10pt,
innertopmargin=-3pt,
linecolor=violet!80,
backgroundcolor=violet!10]{template}{Template}[chapter]

%configs
\geometry{verbose, vscale=0.8, hscale=0.75, footskip=1cm}
\svgsetup{inkscapeexe=/usr/local/bin/inkscape, inkscape=force, inkscapelatex=false}
\setminted{samepage=true, breaklines=true, fontsize=\small}
\mathtoolsset{showonlyrefs}
\setlength{\parskip}{\smallskipamount}
\setlength{\parindent}{0pt}
\hypersetup{pdftitle={TITLE}, pdfauthor={AUTHOR}, unicode=true, bookmarks=true, 
bookmarksnumbered=false, bookmarksopen=false, breaklinks=false, pdfborder={0 0 0}, 
pdfborderstyle={}, backref=false, colorlinks=false}

%fonts
\unimathsetup{math-style=ISO,bold-style=ISO,partial=upright}
\setmainfont{Minion Pro}
\setsansfont[BoldFont = {Myriad Pro Semibold Condensed}]{Myriad Pro Condensed}
\setmonofont[Scale=MatchLowercase]{JuliaMono}
\setmathfont{Minion Math}
\setmathfont{Minion Math Bold}[range={bfup->up,bfit->it}]
\setmathfont{STIXTwoMath-Regular.otf}[range={cal, bfcal, frak}]
\setmathsf{Myriad Pro}
\setkomafont{pageheadfoot}{\sffamily\bfseries\small}
\setkomafont{pagenumber}{\sffamily\bfseries\small}
\setkomafont{section}{\LARGE}
\setkomafont{subsection}{\Large}
\newfontfamily{\emoji}{Twitter Color Emoji}
\newunicodechar{🐢}{\mbox{\emoji🐢}}
\newunicodechar{🐫}{\mbox{\emoji🐫}}
\newunicodechar{🍎}{\mbox{\emoji🍎}}
\newunicodechar{🍐}{\mbox{\emoji🍐}}
\newunicodechar{🍌}{\mbox{\emoji🍌}}
\newunicodechar{♠}{\mbox{\ttfamily♠}}
\newunicodechar{♥}{\mbox{\ttfamily♥}}
\newunicodechar{♦}{\mbox{\ttfamily♦}}
\newunicodechar{♣}{\mbox{\ttfamily♣}}
\newunicodechar{⟼}{\mbox{\ttfamily⟼}}
\newunicodechar{ℚ}{\mbox{$\mathbb Q$}}
\newunicodechar{⟼}{\mbox{\ttfamily⟼}}

%ligatures
\makeatletter
\def\verbatim@nolig@list{}%
\makeatother
\sloppy

%chapterstyle
\setcounter{secnumdepth}{\sectionnumdepth}
\renewcommand*{\raggedchapter}{\raggedleft}
\renewcommand*{\chapterformat}{%
\mbox{\chapappifchapterprefix{\nobreakspace}\thechapter}}
\renewcommand{\chapterlinesformat}[3]{%
	\ifstr{#2}{}{
		\vskip 2cm
	}{
		\parbox{\textwidth}{%
			\raggedchapter
			\LARGE\MakeUppercase{\chapapp}\nobreakspace#2%
		}%
	}
	\vspace{-0.8cm}
	\hrule
	\vspace{0.1cm}
	\parbox{\textwidth}{%
		\raggedchapter
		{\Huge\selectfont #3}%
	}%
}
\renewcommand*{\chapterheadendvskip}{\vspace{4cm}}
\renewcommand*{\chapterheadstartvskip}{\vspace{1cm}}

%heading/footer
\KOMAoptions{footsepline=true,plainfootsepline=true}
\ihead[]{}
\chead[]{}
\ohead[]{}
\ifoot[]{}
\cfoot[]{}
\rofoot[\pagemark]{\headmark\hspace{0.4cm}|\hspace{0.4cm}\pagemark}
\lefoot[\pagemark]{\pagemark\hspace{0.4cm}|\hspace{0.4cm}
	\if@mainmatter
		\chapapp\nobreakspace
	\fi
\headmark}
\pagestyle{scrheadings}
\automark[section]{chapter}

%toc
\setcounter{tocdepth}{\sectiontocdepth}
\KOMAoptions{chapterentrydots=true}
\DeclareTOCStyleEntry[linefill=\hfill]{tocline}{section}
\renewcommand*{\addparttocentry}[2]{%
  \addtocentrydefault{part}{}{#2}%
}
\addtokomafont{partentrypagenumber}{\nullfont}
\addtokomafont{chapterentry}{\large}
\addtokomafont{partentry}{\Large}

%figures
\KOMAoptions{captions=nooneline}
\setkomafont{caption}{\itshape\small}
\setkomafont{captionlabel}{\itshape\small}
\renewcommand*{\captionformat}{\ }
\renewcommand{\thefigure}{\thechapter-\arabic{figure}}
\setlength\abovecaptionskip{-3pt}

%opening
\title{TITLE}
\author{AUTHOR}

\begin{document}

\frontmatter

\tableofcontents{}

\mainmatter{}

CONTENT

\backmatter{}

\end{document}